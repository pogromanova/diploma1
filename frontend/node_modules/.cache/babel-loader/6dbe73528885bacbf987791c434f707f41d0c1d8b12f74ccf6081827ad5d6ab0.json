{"ast":null,"code":"import _slicedToArray from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from\"./styles.module.css\";import{useState}from\"react\";import{Button,LinkComponent,Popup}from\"../index\";import DefaultImage from\"../../images/userpic-icon.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var countForm=function countForm(number,titles){number=Math.abs(number);if(Number.isInteger(number)){var cases=[2,0,1,1,1,2];return titles[number%100>4&&number%100<20?2:cases[number%10<5?number%10:5]];}return titles[1];};var Subscription=function Subscription(_ref){var email=_ref.email,first_name=_ref.first_name,last_name=_ref.last_name,username=_ref.username,removeSubscription=_ref.removeSubscription,recipes_count=_ref.recipes_count,id=_ref.id,recipes=_ref.recipes,avatar=_ref.avatar;var shouldShowButton=recipes_count>3;var moreRecipes=recipes_count-3;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),toDelete=_useState2[0],setToDelete=_useState2[1];return/*#__PURE__*/_jsxs(\"div\",{className:styles.subscription,children:[toDelete&&/*#__PURE__*/_jsx(Popup,{title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B, \\u0447\\u0442\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u043E\\u0442\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F?\",onSubmit:function onSubmit(){removeSubscription({id:id,callback:function callback(){setToDelete(false);}});},onClose:function onClose(){setToDelete(false);}}),/*#__PURE__*/_jsx(\"div\",{className:styles.subscriptionHeader,children:/*#__PURE__*/_jsxs(\"h2\",{className:styles.subscriptionTitle,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.subscriptionAvatar,style:{\"background-image\":\"url(\".concat(avatar||DefaultImage,\")\")}}),/*#__PURE__*/_jsx(LinkComponent,{className:styles.subscriptionRecipeLink,href:\"/user/\".concat(id),title:\"\".concat(first_name,\" \").concat(last_name)})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.subscriptionBody,children:/*#__PURE__*/_jsxs(\"ul\",{className:styles.subscriptionItems,children:[recipes.map(function(recipe){return/*#__PURE__*/_jsx(\"li\",{className:styles.subscriptionItem,children:/*#__PURE__*/_jsx(LinkComponent,{className:styles.subscriptionRecipeLink,href:\"/recipes/\".concat(recipe.id),title:/*#__PURE__*/_jsxs(\"div\",{className:styles.subscriptionRecipe,children:[/*#__PURE__*/_jsx(\"img\",{src:recipe.image,alt:recipe.name,className:styles.subscriptionRecipeImage}),/*#__PURE__*/_jsx(\"h3\",{className:styles.subscriptionRecipeTitle,children:recipe.name}),/*#__PURE__*/_jsxs(\"p\",{className:styles.subscriptionRecipeText,children:[recipe.cooking_time,\" \\u043C\\u0438\\u043D.\"]})]})})},recipe.id);}),shouldShowButton&&/*#__PURE__*/_jsx(\"li\",{className:styles.subscriptionMore,children:/*#__PURE__*/_jsx(LinkComponent,{className:styles.subscriptionLink,title:\"\\u0415\\u0449\\u0435 \".concat(moreRecipes,\" \").concat(countForm(moreRecipes,[\"рецепт\",\"рецепта\",\"рецептов\"]),\"...\"),href:\"/user/\".concat(id)})})]})}),/*#__PURE__*/_jsx(\"div\",{className:styles.subscriptionFooter,children:/*#__PURE__*/_jsxs(Button,{className:styles.subscriptionButton,clickHandler:function clickHandler(_){setToDelete(true);},children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"16\",height:\"20\",viewBox:\"0 0 16 20\",fill:\"none\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M14 10H2\",stroke:\"black\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"})}),\"\\u041E\\u0442\\u043F\\u0438\\u0441\\u0430\\u0442\\u044C\\u0441\\u044F\"]})})]});};export default Subscription;","map":{"version":3,"names":["styles","useState","Button","LinkComponent","Popup","DefaultImage","countForm","number","titles","Math","abs","Number","isInteger","cases","Subscription","email","first_name","last_name","username","removeSubscription","recipes_count","id","recipes","avatar","shouldShowButton","moreRecipes","toDelete","setToDelete","subscription","callback","subscriptionHeader","subscriptionTitle","subscriptionAvatar","subscriptionRecipeLink","subscriptionBody","subscriptionItems","map","recipe","subscriptionItem","subscriptionRecipe","image","name","subscriptionRecipeImage","subscriptionRecipeTitle","subscriptionRecipeText","cooking_time","subscriptionMore","subscriptionLink","subscriptionFooter","subscriptionButton","_"],"sources":["/app/src/components/subscription/index.js"],"sourcesContent":["import styles from \"./styles.module.css\";\nimport { useState } from \"react\";\nimport { Button, LinkComponent, Popup } from \"../index\";\nimport DefaultImage from \"../../images/userpic-icon.jpg\";\n\nconst countForm = (number, titles) => {\n  number = Math.abs(number);\n  if (Number.isInteger(number)) {\n    let cases = [2, 0, 1, 1, 1, 2];\n    return titles[\n      number % 100 > 4 && number % 100 < 20\n        ? 2\n        : cases[number % 10 < 5 ? number % 10 : 5]\n    ];\n  }\n  return titles[1];\n};\n\nconst Subscription = ({\n  email,\n  first_name,\n  last_name,\n  username,\n  removeSubscription,\n  recipes_count,\n  id,\n  recipes,\n  avatar,\n}) => {\n  const shouldShowButton = recipes_count > 3;\n  const moreRecipes = recipes_count - 3;\n  const [toDelete, setToDelete] = useState(false);\n\n  return (\n    <div className={styles.subscription}>\n      {toDelete && (\n        <Popup\n          title=\"Вы уверены, что хотите отписаться?\"\n          onSubmit={() => {\n            removeSubscription({\n              id,\n              callback: () => {\n                setToDelete(false);\n              },\n            });\n          }}\n          onClose={() => {\n            setToDelete(false);\n          }}\n        />\n      )}\n      <div className={styles.subscriptionHeader}>\n        <h2 className={styles.subscriptionTitle}>\n          <div\n            className={styles.subscriptionAvatar}\n            style={{\n              \"background-image\": `url(${avatar || DefaultImage})`,\n            }}\n          />\n          <LinkComponent\n            className={styles.subscriptionRecipeLink}\n            href={`/user/${id}`}\n            title={`${first_name} ${last_name}`}\n          />\n        </h2>\n      </div>\n      <div className={styles.subscriptionBody}>\n        <ul className={styles.subscriptionItems}>\n          {recipes.map((recipe) => {\n            return (\n              <li className={styles.subscriptionItem} key={recipe.id}>\n                <LinkComponent\n                  className={styles.subscriptionRecipeLink}\n                  href={`/recipes/${recipe.id}`}\n                  title={\n                    <div className={styles.subscriptionRecipe}>\n                      <img\n                        src={recipe.image}\n                        alt={recipe.name}\n                        className={styles.subscriptionRecipeImage}\n                      />\n                      <h3 className={styles.subscriptionRecipeTitle}>\n                        {recipe.name}\n                      </h3>\n                      <p className={styles.subscriptionRecipeText}>\n                        {recipe.cooking_time} мин.\n                      </p>\n                    </div>\n                  }\n                />\n              </li>\n            );\n          })}\n          {shouldShowButton && (\n            <li className={styles.subscriptionMore}>\n              <LinkComponent\n                className={styles.subscriptionLink}\n                title={`Еще ${moreRecipes} ${countForm(moreRecipes, [\n                  \"рецепт\",\n                  \"рецепта\",\n                  \"рецептов\",\n                ])}...`}\n                href={`/user/${id}`}\n              />\n            </li>\n          )}\n        </ul>\n      </div>\n      <div className={styles.subscriptionFooter}>\n        <Button\n          className={styles.subscriptionButton}\n          clickHandler={(_) => {\n            setToDelete(true);\n          }}\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"16\"\n            height=\"20\"\n            viewBox=\"0 0 16 20\"\n            fill=\"none\"\n          >\n            <path\n              d=\"M14 10H2\"\n              stroke=\"black\"\n              stroke-width=\"2\"\n              stroke-linecap=\"round\"\n              stroke-linejoin=\"round\"\n            />\n          </svg>\n          Отписаться\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default Subscription;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}