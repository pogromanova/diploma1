{"ast":null,"code":"import _slicedToArray from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Container,FormTitle,Main,Form,Button,FileInput}from'../../components';import styles from'./styles.module.css';import{useHistory}from'react-router-dom';import{useContext,useState}from'react';import{AuthContext,UserContext}from'../../contexts';import MetaTags from'react-meta-tags';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateAvatar=function UpdateAvatar(_ref){var onAvatarChange=_ref.onAvatarChange;var userContext=useContext(UserContext);var _useState=useState(userContext.avatar||null),_useState2=_slicedToArray(_useState,2),avatarFile=_useState2[0],setAvatarFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),updated=_useState4[0],setUpdated=_useState4[1];var checkIfDisabled=function checkIfDisabled(){return avatarFile===''||avatarFile===null||!updated;};return/*#__PURE__*/_jsx(Main,{withBG:true,asFlex:true,children:/*#__PURE__*/_jsxs(Container,{className:styles.center,children:[/*#__PURE__*/_jsxs(MetaTags,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"\\u0424\\u0443\\u0434\\u0433\\u0440\\u0430\\u043C - \\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\\u0430\"}),/*#__PURE__*/_jsx(\"meta\",{property:\"og:title\",content:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\\u0430\"})]}),/*#__PURE__*/_jsxs(Form,{className:styles.form,onSubmit:function onSubmit(e){e.preventDefault();if(checkIfDisabled()){return alert('Аватар не выбран или не заменен');}onAvatarChange({file:avatarFile});},children:[/*#__PURE__*/_jsx(FormTitle,{children:\"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440\"}),/*#__PURE__*/_jsx(FileInput,{onChange:function onChange(file){setUpdated(true);setAvatarFile(file);},fileTypes:[\"image/png\",\"image/jpeg\"],fileSize:5000,className:styles.fileInput,file:avatarFile}),/*#__PURE__*/_jsx(Button,{modifier:\"style_dark\",type:\"submit\",className:styles.button,children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\"})]})]})});};export default UpdateAvatar;","map":{"version":3,"names":["Container","FormTitle","Main","Form","Button","FileInput","styles","useHistory","useContext","useState","AuthContext","UserContext","MetaTags","UpdateAvatar","onAvatarChange","userContext","avatar","avatarFile","setAvatarFile","updated","setUpdated","checkIfDisabled","center","form","e","preventDefault","alert","file","fileInput","button"],"sources":["/app/src/pages/update-avatar/index.js"],"sourcesContent":["import { Container, FormTitle, Main, Form, Button, FileInput } from '../../components'\nimport styles from './styles.module.css'\nimport { useHistory } from 'react-router-dom'\nimport { useContext, useState } from 'react'\nimport { AuthContext, UserContext } from '../../contexts'\nimport MetaTags from 'react-meta-tags'\n\nconst UpdateAvatar = ({\n  onAvatarChange\n}) => {\n  const userContext = useContext(UserContext)\n  \n  const [ avatarFile, setAvatarFile ] = useState(userContext.avatar || null)\n  const [ updated, setUpdated ] = useState(false)\n\n  const checkIfDisabled = () => {\n    return avatarFile === '' ||\n    avatarFile === null || \n    !updated\n  }\n\n  return <Main withBG asFlex>\n    <Container className={styles.center}>\n      <MetaTags>\n        <title>Регистрация</title>\n        <meta name=\"description\" content=\"Фудграм - Редактирование аватара\" />\n        <meta property=\"og:title\" content=\"Редактирование аватара\" />\n      </MetaTags>\n      <Form\n        className={styles.form}\n        onSubmit={e => {\n          e.preventDefault()\n          if (checkIfDisabled()) {\n            return alert('Аватар не выбран или не заменен')\n          }\n          onAvatarChange({ file: avatarFile })\n        }}>\n        <FormTitle>Аватар</FormTitle>\n        <FileInput\n          onChange={file => {\n            setUpdated(true)\n            setAvatarFile(file)\n          }}\n          fileTypes={[\"image/png\", \"image/jpeg\"]}\n          fileSize={5000}\n          className={styles.fileInput}\n          file={avatarFile}\n        />\n        <Button\n          modifier='style_dark'\n          type='submit'\n          className={styles.button}\n        >\n          Обновить аватар\n        </Button>\n      </Form>\n    </Container>\n  </Main>\n}\n\nexport default UpdateAvatar\n"],"mappings":"8HAAA,OAASA,SAAS,CAAEC,SAAS,CAAEC,IAAI,CAAEC,IAAI,CAAEC,MAAM,CAAEC,SAAS,KAAQ,kBAAkB,CACtF,MAAOC,OAAM,KAAM,qBAAqB,CACxC,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,OAASC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAC5C,OAASC,WAAW,CAAEC,WAAW,KAAQ,gBAAgB,CACzD,MAAOC,SAAQ,KAAM,iBAAiB,yFAEtC,GAAMC,aAAY,CAAG,QAAfA,aAAY,MAEZ,IADJC,eAAc,MAAdA,cAAc,CAEd,GAAMC,YAAW,CAAGP,UAAU,CAACG,WAAW,CAAC,CAE3C,cAAsCF,QAAQ,CAACM,WAAW,CAACC,MAAM,EAAI,IAAI,CAAC,wCAAlEC,UAAU,eAAEC,aAAa,eACjC,eAAgCT,QAAQ,CAAC,KAAK,CAAC,yCAAvCU,OAAO,eAAEC,UAAU,eAE3B,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,EAAS,CAC5B,MAAOJ,WAAU,GAAK,EAAE,EACxBA,UAAU,GAAK,IAAI,EACnB,CAACE,OAAO,CACV,CAAC,CAED,mBAAO,KAAC,IAAI,EAAC,MAAM,MAAC,MAAM,4BACxB,MAAC,SAAS,EAAC,SAAS,CAAEb,MAAM,CAACgB,MAAO,wBAClC,MAAC,QAAQ,yBACP,6FAA0B,cAC1B,aAAM,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,8KAAkC,EAAG,cACtE,aAAM,QAAQ,CAAC,UAAU,CAAC,OAAO,CAAC,iIAAwB,EAAG,GACpD,cACX,MAAC,IAAI,EACH,SAAS,CAAEhB,MAAM,CAACiB,IAAK,CACvB,QAAQ,CAAE,kBAAAC,CAAC,CAAI,CACbA,CAAC,CAACC,cAAc,EAAE,CAClB,GAAIJ,eAAe,EAAE,CAAE,CACrB,MAAOK,MAAK,CAAC,iCAAiC,CAAC,CACjD,CACAZ,cAAc,CAAC,CAAEa,IAAI,CAAEV,UAAW,CAAC,CAAC,CACtC,CAAE,wBACF,KAAC,SAAS,mDAAmB,cAC7B,KAAC,SAAS,EACR,QAAQ,CAAE,kBAAAU,IAAI,CAAI,CAChBP,UAAU,CAAC,IAAI,CAAC,CAChBF,aAAa,CAACS,IAAI,CAAC,CACrB,CAAE,CACF,SAAS,CAAE,CAAC,WAAW,CAAE,YAAY,CAAE,CACvC,QAAQ,CAAE,IAAK,CACf,SAAS,CAAErB,MAAM,CAACsB,SAAU,CAC5B,IAAI,CAAEX,UAAW,EACjB,cACF,KAAC,MAAM,EACL,QAAQ,CAAC,YAAY,CACrB,IAAI,CAAC,QAAQ,CACb,SAAS,CAAEX,MAAM,CAACuB,MAAO,mGAGlB,GACJ,GACG,EACP,CACT,CAAC,CAED,cAAehB,aAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}