{"ast":null,"code":"import _defineProperty from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _slicedToArray from\"/app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import styles from\"./style.module.css\";import{Tooltip}from\"react-tooltip\";import{LinkComponent,Icons,Button,Popup}from\"../index\";import{AuthContext}from\"../../contexts\";import{useContext,useState}from\"react\";import cn from\"classnames\";import DefaultImage from\"../../images/userpic-icon.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Card=function Card(_ref){var _ref$name=_ref.name,name=_ref$name===void 0?\"Без названия\":_ref$name,id=_ref.id,image=_ref.image,is_favorited=_ref.is_favorited,is_in_shopping_cart=_ref.is_in_shopping_cart,cooking_time=_ref.cooking_time,_ref$author=_ref.author,author=_ref$author===void 0?{}:_ref$author,handleLike=_ref.handleLike,handleAddToCart=_ref.handleAddToCart,updateOrders=_ref.updateOrders;var authContext=useContext(AuthContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),toLogin=_useState2[0],setToLogin=_useState2[1];var _useState3=useState(\"nowrap\"),_useState4=_slicedToArray(_useState3,2),whiteSpaceValue=_useState4[0],setWhiteSpaceValue=_useState4[1];return/*#__PURE__*/_jsxs(\"div\",{className:styles.card,children:[toLogin&&/*#__PURE__*/_jsx(Popup,{title:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(LinkComponent,{href:\"/signin\",title:\"\\u0412\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435\"}),\" \\u0438\\u043B\\u0438\",\" \",/*#__PURE__*/_jsx(LinkComponent,{href:\"/signup\",title:\"\\u0437\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u0439\\u0442\\u0435\\u0441\\u044C\"}),\", \\u0447\\u0442\\u043E\\u0431\\u044B \\u0441\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C \\u0440\\u0435\\u0446\\u0435\\u043F\\u0442\"]}),onClose:function onClose(){setToLogin(false);}}),/*#__PURE__*/_jsx(LinkComponent,{href:\"/recipes/\".concat(id),title:/*#__PURE__*/_jsx(\"div\",{className:styles.card__image,style:{backgroundImage:\"url(\".concat(image,\")\")}})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.card__body,children:[/*#__PURE__*/_jsx(LinkComponent,{className:styles.card__title,href:\"/recipes/\".concat(id),title:name,style:{whiteSpace:whiteSpaceValue},onMouseEnter:function onMouseEnter(){setWhiteSpaceValue(\"normal\");},onMouseLeave:function onMouseLeave(){setWhiteSpaceValue(\"nowrap\");}}),/*#__PURE__*/_jsxs(\"div\",{className:styles.card__data,children:[/*#__PURE__*/_jsx(\"div\",{className:styles[\"card__author-image\"],style:{\"background-image\":\"url(\".concat(author.avatar||DefaultImage,\")\")}}),/*#__PURE__*/_jsx(\"div\",{className:styles.card__author,children:/*#__PURE__*/_jsx(LinkComponent,{href:\"/user/\".concat(author.id),title:\"\".concat(author.first_name,\" \").concat(author.last_name),className:styles.card__link})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.card__time,children:[cooking_time,\" \\u043C\\u0438\\u043D.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.card__controls,children:[/*#__PURE__*/_jsx(Button,{className:styles.card__add,clickHandler:function clickHandler(_){if(!authContext){return setToLogin(true);}handleAddToCart({id:id,toAdd:Number(!is_in_shopping_cart),callback:updateOrders});},children:is_in_shopping_cart?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Icons.CheckIcon,{}),\"\\u0420\\u0435\\u0446\\u0435\\u043F\\u0442 \\u0434\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Icons.PlusIcon,{}),\" \\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0438\"]})}),/*#__PURE__*/_jsx(Button,{modifier:\"style_none\",clickHandler:function clickHandler(_){if(!authContext){return setToLogin(true);}handleLike({id:id,toLike:Number(!is_favorited)});},className:cn(styles[\"card__save-button\"],_defineProperty({},styles[\"card__save-button_active\"],is_favorited)),\"data-tooltip-id\":id,\"data-tooltip-content\":is_favorited?\"Удалить из избранного\":\"Добавить в избранное\",\"data-tooltip-place\":\"bottom\",children:/*#__PURE__*/_jsx(Icons.LikeIcon,{})}),/*#__PURE__*/_jsx(Tooltip,{id:id.toString()})]})]})]});};export default Card;","map":{"version":3,"names":["styles","Tooltip","LinkComponent","Icons","Button","Popup","AuthContext","useContext","useState","cn","DefaultImage","Card","name","id","image","is_favorited","is_in_shopping_cart","cooking_time","author","handleLike","handleAddToCart","updateOrders","authContext","toLogin","setToLogin","whiteSpaceValue","setWhiteSpaceValue","card","card__image","backgroundImage","card__body","card__title","whiteSpace","card__data","avatar","card__author","first_name","last_name","card__link","card__time","card__controls","card__add","_","toAdd","Number","callback","toLike","toString"],"sources":["/app/src/components/card/index.js"],"sourcesContent":["import styles from \"./style.module.css\";\nimport { Tooltip } from \"react-tooltip\";\nimport { LinkComponent, Icons, Button, Popup } from \"../index\";\nimport { AuthContext } from \"../../contexts\";\nimport { useContext, useState } from \"react\";\nimport cn from \"classnames\";\nimport DefaultImage from \"../../images/userpic-icon.jpg\";\n\nconst Card = ({\n  name = \"Без названия\",\n  id,\n  image,\n  is_favorited,\n  is_in_shopping_cart,\n  cooking_time,\n  author = {},\n  handleLike,\n  handleAddToCart,\n  updateOrders,\n}) => {\n  const authContext = useContext(AuthContext);\n  const [toLogin, setToLogin] = useState(false);\n  const [whiteSpaceValue, setWhiteSpaceValue] = useState(\"nowrap\");\n\n  return (\n    <div className={styles.card}>\n      {toLogin && (\n        <Popup\n          title={\n            <>\n              <LinkComponent href=\"/signin\" title=\"Войдите\" /> или{\" \"}\n              <LinkComponent href=\"/signup\" title=\"зарегистрируйтесь\" />, чтобы\n              сохранить рецепт\n            </>\n          }\n          onClose={() => {\n            setToLogin(false);\n          }}\n        />\n      )}\n\n      <LinkComponent\n        href={`/recipes/${id}`}\n        title={\n          <div\n            className={styles.card__image}\n            style={{ backgroundImage: `url(${image})` }}\n          />\n        }\n      />\n      <div className={styles.card__body}>\n        <LinkComponent\n          className={styles.card__title}\n          href={`/recipes/${id}`}\n          title={name}\n          style={{ whiteSpace: whiteSpaceValue }}\n          onMouseEnter={() => {\n            setWhiteSpaceValue(\"normal\");\n          }}\n          onMouseLeave={() => {\n            setWhiteSpaceValue(\"nowrap\");\n          }}\n        />\n        <div className={styles.card__data}>\n          <div\n            className={styles[\"card__author-image\"]}\n            style={{\n              \"background-image\": `url(${author.avatar || DefaultImage})`,\n            }}\n          />\n          <div className={styles.card__author}>\n            <LinkComponent\n              href={`/user/${author.id}`}\n              title={`${author.first_name} ${author.last_name}`}\n              className={styles.card__link}\n            />\n          </div>\n          <div className={styles.card__time}>{cooking_time} мин.</div>\n        </div>\n        <div className={styles.card__controls}>\n          <Button\n            className={styles.card__add}\n            clickHandler={(_) => {\n              if (!authContext) {\n                return setToLogin(true);\n              }\n              handleAddToCart({\n                id,\n                toAdd: Number(!is_in_shopping_cart),\n                callback: updateOrders,\n              });\n            }}\n          >\n            {is_in_shopping_cart ? (\n              <>\n                <Icons.CheckIcon />\n                Рецепт добавлен\n              </>\n            ) : (\n              <>\n                <Icons.PlusIcon /> Добавить в покупки\n              </>\n            )}\n          </Button>\n\n          <Button\n            modifier=\"style_none\"\n            clickHandler={(_) => {\n              if (!authContext) {\n                return setToLogin(true);\n              }\n              handleLike({ id, toLike: Number(!is_favorited) });\n            }}\n            className={cn(styles[\"card__save-button\"], {\n              [styles[\"card__save-button_active\"]]: is_favorited,\n            })}\n            data-tooltip-id={id}\n            data-tooltip-content={\n              is_favorited ? \"Удалить из избранного\" : \"Добавить в избранное\"\n            }\n            data-tooltip-place=\"bottom\"\n          >\n            <Icons.LikeIcon />\n          </Button>\n          <Tooltip id={id.toString()} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Card;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}